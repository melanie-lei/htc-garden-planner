<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Farm Planner</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="page">
      <header>
        <h1>Farm Planner</h1>
        <p>Design your garden layout, select plants, and get a time-aware planting schedule.</p>
      </header>

      <!-- ============ GRID EDITOR ============ -->
      <section class="panel">
        <h2 class="section-toggle" data-target="grid-editor">Grid Editor</h2>
        <div id="grid-editor">
          <div class="controls">
            <div class="group">
              <h3>Grid</h3>
              <label>Width <input id="grid-width" type="number" min="1" value="10" /></label>
              <label>Height <input id="grid-height" type="number" min="1" value="10" /></label>
              <label>
                Fill
                <select id="grid-fill">
                  <option value="255">Invalid (255)</option>
                  <option value="0">Unassigned (0)</option>
                </select>
              </label>
              <button id="create-grid">Create Grid</button>
            </div>

            <div class="group">
              <h3>Paint</h3>
              <div class="row">
                <label class="radio"><input type="radio" name="tool" value="brush" checked /> Brush</label>
                <label class="radio"><input type="radio" name="tool" value="fill" /> Fill</label>
              </div>
              <div class="row">
                <label class="radio"><input type="radio" name="paint-type" value="plot" checked /> Plot ID</label>
                <input id="plot-id" type="number" min="1" max="254" value="1" />
              </div>
              <div class="row">
                <label class="radio"><input type="radio" name="paint-type" value="unassigned" /> Unassigned (0)</label>
              </div>
              <div class="row">
                <label class="radio"><input type="radio" name="paint-type" value="invalid" /> Invalid (255)</label>
              </div>
              <label>Cell size <input id="cell-size" type="range" min="16" max="40" value="26" /></label>
            </div>

            <div class="group">
              <h3>Storage</h3>
              <label>CSV file <input id="filename" type="text" value="test_farm.csv" /></label>
              <button id="save-grid">Save CSV</button>
              <button id="load-grid">Load CSV</button>
              <div class="hint" id="save-status"></div>
            </div>
          </div>

          <div class="canvas">
            <div class="legend">
              <span class="legend-box invalid"></span> Invalid
              <span class="legend-box unassigned"></span> Unassigned
              <span class="legend-box plot"></span> Plot
            </div>
            <div id="grid" class="grid"></div>
          </div>
        </div>
      </section>

      <!-- ============ PLANNER ============ -->
      <section class="panel">
        <h2>Planner</h2>
        <div class="controls">
          <div class="group" style="flex: 2">
            <h3>Select Plants (drag to reorder)</h3>
            <div class="row">
              <select id="plant-select"><option value="">Loading...</option></select>
              <button id="add-plant">Add</button>
            </div>
            <ol id="plant-list" class="plant-list"></ol>
          </div>

          <div class="group">
            <h3>Settings</h3>
            <label>Year <input id="plan-year" type="number" min="2020" max="2100" value="2026" /></label>
            <label>
              Start month
              <select id="start-month">
                <option value="1">January</option><option value="2">February</option>
                <option value="3">March</option><option value="4">April</option>
                <option value="5">May</option><option value="6">June</option>
                <option value="7">July</option><option value="8">August</option>
                <option value="9">September</option><option value="10">October</option>
                <option value="11">November</option><option value="12">December</option>
              </select>
            </label>
            <button id="run-planner" class="primary">Run Planner</button>
            <div class="hint" id="plan-status"></div>
          </div>
        </div>
      </section>

      <!-- ============ RESULTS ============ -->
      <section id="results-section" class="panel" style="display:none">
        <h2>Plan Results</h2>
        <div id="plan-summary"></div>

        <h3>Timeline Scrubber</h3>
        <div class="slider-row">
          <input id="date-slider" type="range" min="0" max="364" value="0" />
          <span id="current-date" class="date-label">Jan 01</span>
        </div>
        <div id="timeline-grid" class="grid"></div>

        <h3>Plot Timelines</h3>
        <div id="plot-timelines"></div>

        <h3>Adjacency Interactions</h3>
        <div id="adjacency-events"></div>

        <h3>Compatibility Matrix</h3>
        <div id="compat-matrix"></div>
      </section>
    </div>

    <script src="app.js"></script>
  </body>
</html>
